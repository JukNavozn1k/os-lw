# os-lw

Учебное приложение на `tkinter`, демонстрирующее работу потоков и синхронизацию доступа к общим ресурсам.

## Требования

- Python `>=3.14,<3.15`
- Poetry (опционально)

## Запуск

### Через Poetry

```bash
poetry install
poetry run python main.py
```

### Без Poetry

```bash
python main.py
```

## Вкладки приложения

### Запись в файл

- Введите текст и нажмите `Добавить текст`.
- Чтобы не набирать вручную, нажмите `Lorem ipsum` — он подставит примерный текст в поле ввода.
- `Поток пользователя` записывает введённые символы в файл (берёт их из очереди).
- `Поток времени` периодически добавляет текущее время (`HH:MM:SS`).
- Запись защищена мьютексом: в критической секции одновременно находится только один поток.
- Файл можно:

  - выбрать кнопкой `...`,
  - очистить кнопкой `Очистить`,
  - просмотреть (есть `Обновить` и автообновление).

По умолчанию используется `user.txt` в текущей директории.

### Производитель–потребитель

- `ProducerThread` добавляет элементы в ограниченный буфер.
- `ConsumerThread` извлекает элементы из буфера.
- Интерфейс показывает текущее состояние буфера, заполненность и счётчики произведено/потреблено.

## Структура проекта

- `main.py` — точка входа.
- `gui/` — GUI.

  - `main_window.py` — окно с вкладками.
  - `tab_file_write.py` — задача записи в файл.
  - `tab_prod_cons.py` — producer/consumer.
  - `tab_help.py` — встроенная справка.

- `threads/` — потоки.

  - `file_writer.py` — `FileWriterThread`, `TimeWriterThread`.
  - `producer.py` — `ProducerThread`, `ConsumerThread` (общая логика управления потоками).
  - `consumer.py` — реэкспорт `ConsumerThread`.

- `synchronization/` — синхронизация.

  - `mutex_manager.py` — `SharedMutex`.
  - `dekker_algorithm.py` — алгоритм Деккера.

- `utils/` — утилиты.

  - `buffer.py` — потокобезопасный буфер.
  - `file_manager.py` — операции с файлом.